5 个问题:
### 碰到什么问题? 是怎么解决的?
ssr 遇到的问题: 
1、 在做客户端渲染的时候,会在 componentDidMount 中去获取，但是在服务器端渲染的时候这个方法并不会执行.怎么样获取数据？
    在组件里面定义一个方法: 
    Home.loadData = (store) => {
        store.dispatch(getHomeList);s
        // 这个函数,负责在服务器端渲染之前,把这个路由需要的数据提前加载好.
    }
    记住 react-router-dom 里面的match 方法,根据访问的路径不同，加载不同的数据,改造路由 路由挂载 loadData  方法.

2、  服务器接收到请求,这个时候store 是空的?
    1、如何根据路由，往store 里面加载数据. 遍历路由. 让路由里面对应的方法执行一遍.
    2、函数填充store 里面内容,
    定义一个promise 数组. 提前加载数据的方法push到promise 数组里面. 让所有的数据加载完成在合并store.
    ```
    Home.loadData = (store) => {
        return  store.dispatch(getHomeList);  // 返回 promise 对象.
        // 这个函数,负责在服务器端渲染之前,把这个路由需要的数据提前加载好.
    }
    ```
3、 样式的问题
    如何支持 css 样式. isomefic-style-loader.
    如何让服务端支持样式加载.
    webpack 客户端支持 style-loader, 服务端 webpack 也要支持 isomphic-style-loader.
    服务端渲染会获取 styles.getContext,styles.getCss 的内容.
    if(styles.getCss){
        styles.getCss
    }
    this.props.staticContext.css = styles._getCss();
    this.props.staticContext.css.push(styles._getCss());
    在服务端把这个css追加到html里面.

4、  服务端注水和脱水的问题.
     页面会出现闪屏的问题, 服务器端渲染好了,但其实客户端是store 其实是空的对象. 服务器渲染数据和客户端的数据不统一,这时候会用到数据的脱水和注水. 在渲染的html 是时候.
     ```
     window.context ={
         state:${JSON.stringfy(store.getState()))}
     }
     ```
     ```
        export const getStore = (req) =>{
            // 改变服务器端store的内容,那么就一定要使用serverAxios.
            return createStore(reducer,applyMiddleware(thunk.withExtraArgument(serverAxios(req))));
        }
        export const getClientStore = () =>{
            const defaultState = window.context.state;
            // 改变客户端store的内容,一定要使用clientAxios.
            return createStore(reducer,defaultState,applyMiddleware(thunk.withExtraArgument(clientAxios)));
        }
     ```
     初始化值和服务器的数据是一模一样了.

ssr 的优缺点分析:
页面使用JS来渲染出来的.
-. 2.1 在服务器端编写React 组件.
-. 服务器端渲染的流程: 浏览器发送请求，服务器运行React代码生成页面. 下载html代码.
优点:
    -. SSR 首屏加载很快.
    -. CSR SEO效果非常不好.
缺点:
    需要node 启动,要去维护 node 应用.需要去做高可用.
    可能出现内存泄漏的问题.

工作原理:
    同构.

自适应方案的问题:

1、自适应在移动端要适配很多种机型,大家通常的做法是media+rem 的方式来解决,这种方式的缺点是media 是有优先级的.
我设置多少宽和高, 什么这种设备类型的识别,如果有多个mdiea 的话,就会有优先级覆盖的问题,如果覆盖不好的话，会导致失效,这是一个问题,第二个是设备太多,我一个个去适配,要买非常多的测试机，是适配不同的机型,我只能拿自己的手机测试或者拿同事的手机测试,覆盖的面很窄,所以这种问题不具备通用性,这就是问题所在.
我们的技术方案是:动态去计算根节点的font-size,背后的原理就是rem, 不同的设计稿在不同的设备上如何展示相同的效果.
px2rem. 所有的样式转成rem。 根据font-size 动态去计算rem.

技术原理:
320 * 667.
找一个基准像素,比如iphone 6. fontsize:40 设备宽高是:750*1334  iphonexr 设备宽高是:828*1796.

设备像素比（dpr） = 设备像素（分辨率）/设备独立像素（屏幕尺寸)

iphone 6 一般是dpr = 2;

iphone 5s设计尺寸是 320 dpr是 2 那么物理像素是: 640个真实像素点. 按钮: 20*20 fontsize:40px;

设计尺寸是 375 667 dpr 是 3 ,物理像素是: 1125. 按钮是: (20*20) * 1125/640 = 70.1.

所有单位多是rem 去设计. 这样不就完美了吗?

高清方案: scale = 1 / dpr 的比例.
1rem =  16 px;
1rem等于html根元素设定的font-size的px值.如果css里面没有设定html的font-size，则默认浏览器以1rem=16px来换算.
html: 动态计算rem.

1. 首先将px 转成 rem.
2. 动态计算font-size.
   怎么实现: 可以在不同设备上去获取dpr = window.devicePixelRatio, 然后根据dpr 去计算 scale 以及width ,然后将创建创建meta 标签，插入到文档对象的head 部分.
```
<meta name="viewport" content="width=device-width,inital-scale=1.0">
```

基本概念:
viewport.
rem.
css 像素, 设备像素, 逻辑像素, 设备像素比.

工作原理:
1、利用viewport 和 设备像素比调整基准像素.
2、利用 px2rem 自动转换css 单位.
3、前端路由的原理.
4、自适应方案的设计.

SPA:
 a: 前后端分离.
 b: 减轻服务器压力.
 c: 增强用户体验.

工作原理:
 a: history API.
    onpopstate.
    pushState.
    前进,后退,控制.
    注册路由.
    监听路由.
    如果设为browserHistory，浏览器的路由就不再通过Hash完成了，而显示正常的路径example.com/some/path，背后调用的是浏览器的History API。

 b: hash.
    hashchange.
    location.hash.
    如果设为hashHistory，路由将通过URL的hash部分（#）切换，URL的形式类似example.com/#/some/path。

解释了如何把#去掉?


### 项目怎么介绍.
安居客 m 站.

1、项目背景.
安居客m站是全面覆盖新房、二手房、租房、商业地产四大业务，同时为开发商与经纪人提供高效的网络推广平台.

2、项目收益.
网站月独立访问用户上千万

3、项目设计.
react + redux.
参与用户中心、二手房业务的设计与开发

4、围绕这个技术架构来思考技术点:

4、项目总结.
缺点:

### 通过项目学到了什么?
1、内存泄漏的问题. 有什么缺点.

### 问答设计.
特殊的点:
1、

临时问题:
1、服务端渲染会执行哪些钩子函数.

### 如何争取机会.
1、学习能力很强.
2、业务分析能力很强.
3、我的学习能力和综合能力比较强.

### 你的优势是什么?
1、快速学习技术的能力.

学习的思维模型:
1、解决什么问题?
2、解决的方案是什么?
3、基本原理是什么?
4、同类型的方案还有哪些? 优缺点有哪些? 
5、使用场景有哪些? 对现有业务有什么改进?

全链路业务思考模型:
分析业务最核心的方法和关键点，就是梳理出这条业务的整体链路，并查看是否可以形成闭环.。 一个完整的链路闭环包括：业务目标、业务思路、产品方案、跟踪和调整.一个业务靠不靠谱，先要看业务目标是否契合大目标或者有用户需求，其次还要有业务开展的思路，之后产品针对这种思路的具体产品方案，最后就是业务落地、跟踪结果并分析，再来看是否需要调整或者放弃。在这个闭环中最好可以自己产生价值（钱）自己消费持续升级.

另外我的github 上面也是有我独立做的项目.我可以独立去抗住一些业务.

###  认真谨慎的分析.

###  重新再次面试.
补全了知识体系.

###  离职的问题.
这份工作和我的职业目标和规划不符合. 所以选择下一份工作.
自己有一个明确的职业规划,技术上的成就,生活和工作的评估.

###  为什么来我们公司.
我工作也有好几年了,自己在业务和技术上也有一定的沉淀, 我想承担和挑战难度更大的事情.
让自己有一个全方面的成长.

### 你有什么问题要问我的?

### 其他能力
1、主动描述.
2、带人能力.
    带实习生完成小程序的开发和维护、代码规范和review.

### 职业竞争力.

### 项目找亮点:
docker 部署前端.
自适应方案.
ssr 的方案.
缺 点:

满意的项目是哪一个?

### 技术找亮点:
react . taro. 业务方向. 学习思考的方案.

### 小程序项目遇到什么问题:
1、框架式怎么搭建的?

2、遇到什么问题?
  我之前做过这样一个业务场景, 就是根据商品的信息，生成海报, 海报的样式可以动态切换,来回选择.

  碰到有如下问题:
  1、每次点击生成海报,海报上的位置位置以及二维码的位置多是不一样的,如何把这些不一样的抽离封装,抽象出一个组件出来.
  2、
  ``
   第一个问题怎么解决:
  1、问题描述:
  基本元素:

  ```
   blocks  // 布局的.
   images  // 加载图片的.(画布,头像,二维码))
   texts   // 邀请人,活动名称 等等文字的信息.
   width,height,backgroundColor  // 宽,高,背景色.

   <TaroCanvasDrawer
        config={this.state.bannerConfig} // 绘制配置
        onCreateSuccess={this.onCreateSuccess} // 绘制成功回调
        onCreateFail={this.onCreateFail} // 绘制失败回调
   />
  ```

  canvasToTempFilePath canvas 转成 图片路径的文件的方法. 进行回调.

 

  2、动态深层海报的时候 canvas绘制使用的是px单位，但不同设备的px是需要换算的, 否则在不同的设备上面显示的距离是不对的. 要对单位进行换算.

  怎么绘制图片和背景?
  1、初始化Canvas.
  2、设置画布底色.
  3、根据类型去绘制 drawImage,drawText,drawBlock,drawLine.

  单位转换的问题:
  canvas绘制使用的是px单位，但不同设备的px是需要换算的，所以在组件中统一使用rpx单位，这里就涉及到单位怎么换算问题.
  通过wx.getSystemInfoSync获取设备屏幕尺寸，从而得到比例，进而做转换，代码如下:
  以 iphone 6: 1334*750 为基础单位.

  ```
    const sysInfo = wx.getSystemInfoSync();
    const screenWidth = sysInfo.screenWidth;
    this.factor = screenWidth / 750;	// 获取比例
    function toPx(rpx) {	// rpx转px
        return rpx * this.factor;
    }
    
    function toRpx(px){	// px转rpx
        return px / this.factor;
    }
  ```

  * https://juejin.im/post/5b7e48566fb9a01a1059543f.

  最近编写的基本原则:
  1、单一职责原则.DRY 原则.
  2、第一步:将设计好的 UI 划分为组件层级.
  3、第二步:用 React 创建一个静态版本.
  4、第三步:确定 UI state 的最小（且完整）表示. 遵循DRY 原则.
  5、第四步:确定 state 放置的位置.
  6、第五步:添加反向数据流.

  参考:
  https://segmentfault.com/a/1190000018839170

4、

https://www.zhihu.com/search?type=content&q=%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE